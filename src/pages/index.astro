---
import BaseLayout from '../layouts/BaseLayout.astro';
import ProjectCard from '../components/ProjectCard.astro';
import { getCollection } from 'astro:content';

const pageTitle = "Home";
const allProjects = await getCollection('projects');
const sortedProjects = allProjects.sort((a, b) => b.data.date.valueOf() - a.data.date.valueOf());
---

<BaseLayout pageTitle={pageTitle}>
	
  <!-- HERO SECTION -->
  <section class="relative w-full pt-10 pb-16 overflow-visible">
    
    <div class="w-full md:w-[90%] mx-auto relative">
        
        <!-- Hero Image & Cutout Wrapper -->
        <div class="relative w-full">
            <div class="aspect-[16/9] md:aspect-[21/9] w-full md:rounded-lg overflow-hidden relative shadow-lg">
                 <img 
                  src="/data background.jpg" 
                  class="w-full h-full object-cover opacity-90 "
                />
                <div class="absolute inset-0 bg-black/10"></div>
            </div>

            <div class="absolute -bottom-10 md:-bottom-16 left-1/2 transform -translate-x-1/2 w-100 md:w-[650px] z-10 pointer-events-none">
                 <img 
                   src="/francesco-cutout.jpg" 
                   alt="Francesco" 
                   class="w-full h-auto drop-shadow-2xl hover:scale-105 transition duration-500 ease-out"
                 />
            </div>
        </div>

		<div class="relative mt-12 w-full px-4 md:px-0 md:mt-0 md:absolute md:left-8 md:bottom-10 z-20 md:max-w-md">
			<div class="bg-white/90 backdrop-blur-sm p-8 rounded-xl shadow-[0_20px_50px_rgba(0,0,0,0.15)] border border-gray-100 relative w-full text-left">
				
                <div class="w-fit mx-auto md:w-full">
                    <h1 class="text-3xl font-serif font-bold text-gray-900 leading-[1.1] mb-4">
                        Francesco <span class="text-blue-600">D'Angolo</span>
                        <br>
                        Computer & Data 
                        <br>
                        <span id="dynamic-word" class="text-[#E85D04] transition-opacity duration-500">Science</span>
                    </h1>

                    <p class="text-gray-600 text-sm leading-relaxed mb-6 font-sans">
                        Welcome to my portfolio!
                    </p>

                    <a href="/resume" class="text-xs font-bold uppercase tracking-widest text-[#E85D04] hover:text-black border-b-2 border-[#E85D04]/20 hover:border-black pb-1 transition-all">
                        Discover More
                    </a>
                </div>
			</div>
		</div>

    </div>

  </section>

  <!-- MISSION SECTION -->
<section class="w-[90%] mx-auto md:mt-12 mb-24 grid grid-cols-1 md:grid-cols-12 gap-8">
      
      <div class="md:col-span-1 hidden md:block border-t-2 border-black pt-4">
           <span class="text-[10px] font-bold font-sans tracking-[0.2em] uppercase text-black">
              The Mission
           </span>
      </div>

      <div class="md:col-span-9 md:col-start-3">
          
          <h2 class="text-3xl md:text-4xl font-sans font-light leading-tight text-gray-500">
            My <span class="font-bold text-gray-900">work</span> is driven by a strong curiosity on how <span class="font-bold text-[#E85D04]">technology</span> can shape the future. 
            <br><br>
            I believe real innovation lies at the intersection of <span class="font-bold text-gray-900">logic and imagination</span>, and that the greatest value we can bring is building technology that empowers people and communities.
          </h2>

		    <p class="mt-8 text-xl font-serif italic text-gray-500">
            "Stay hungry, stay foolish."
            </p>
      </div>
  </section>

  <!-- EDUCATION / FACTS SECTION -->
  <section class="w-[90%] mx-auto mb-24">
    
    <div class="grid grid-cols-1 lg:grid-cols-12 gap-8">
      
      <div class="lg:col-span-8 relative min-h-[500px] rounded-xl overflow-hidden group">
          
          <img 
            src="/UIC.webp" 
            alt="Francesco at UIC" 
            class="absolute inset-0 w-full h-full object-cover transition-transform duration-1000 group-hover:scale-105"
          />
          
		<div class="absolute bottom-6 left-6 md:bottom-10 md:left-10 bg-white/70 backdrop-blur-sm p-6 md:p-8 rounded-lg shadow-xl max-w-sm z-10 border border-white/50">
              
              <span class="text-[10px] font-bold font-sans tracking-[0.2em] uppercase text-gray-500 block mb-3">
                  Currently
              </span>

              <h3 class="text-2xl md:text-3xl font-serif font-bold text-gray-900 leading-tight mb-3">
                  Master at UIC <br> Computer Science  
              </h3>

              <p class="text-gray-800 font-sans text-sm leading-relaxed font-medium">
                  Double degree program with Politecnico di Torino, Master of Science in Computer Science, with specialization in Data Science.
              </p>
          </div>
      </div>


	<div class="lg:col-span-4 flex flex-col justify-between h-full pl-0 lg:pl-6 py-2">
          
          <div>
              <div class="w-full h-px bg-gray-300 mb-5"></div>
              
              <span class="text-[10px] font-bold font-sans tracking-[0.2em] uppercase text-black block mb-3">
                  Just the facts
              </span>

              <h3 class="text-xl md:text-2xl font-serif font-bold text-gray-900 leading-tight mb-2">
                  Computer Science & Engineering <br> at Politecnico di Torino
              </h3>
              
              <p class="text-gray-600 font-sans text-sm">
                  Politecnico di Torino 
              </p>
          </div>

          <div class="relative w-full aspect-[4/3] mt-8 group cursor-pointer">
              
              <div class="absolute inset-0 bg-[#E85D04] transform rotate-3 rounded-xl translate-x-2 translate-y-2 shadow-sm transition-transform group-hover:rotate-6"></div>
              
              <div class="absolute inset-0 bg-white rounded-xl overflow-hidden border-4 border-white shadow-lg transform -rotate-1 transition-transform duration-500 group-hover:rotate-0 group-hover:scale-[1.02]">
                  
                  <img 
                    src="/Politecnico.jpg" 
                    alt="Graduation" 
                    class="w-full h-full object-cover"
                  />
                  
              </div>

          </div>

      </div>

    </div>
  </section>

    <!-- PROJECTS SECTION -->
	<section class="w-[90%] mx-auto md:mt-12 mb-16 grid grid-cols-1 md:grid-cols-12 gap-8">
	
      
	<div class="md:col-span-1 hidden md:block border-t-2 border-black pt-4">
		<span class="text-[10px] font-bold font-sans tracking-[0.2em] uppercase text-black">
              The Projects
           </span>
      </div>

      <div class="md:col-span-11 grid grid-cols-1 md:grid-cols-3 gap-8 md:gap-12">
          
          {sortedProjects.slice(0, 3).map((project) => (
             <ProjectCard 
                title={project.data.title}
                description={project.data.description}
                url={`/projects/${project.slug}`}
                image={project.data.image}
                tags={project.data.tags}
             />
          ))}

      </div>

  </section>

  <!-- ADDITIONAL PROJECTS (HORIZONTAL) -->
  {sortedProjects.length > 3 && (
    <section class="w-[90%] mx-auto mb-32 grid grid-cols-1 md:grid-cols-12 gap-8">

	<div class="md:col-span-1 hidden md:block"></div>
  
      <div class="md:col-span-11 flex flex-col gap-16">
          
          {sortedProjects.slice(3, 4).map((project) => (
             <ProjectCard 
                variant="horizontal"  
                title={project.data.title}
                description={project.data.description}
                url={`/projects/${project.slug}`}
                image={project.data.image}
                tags={project.data.tags}
             />
          ))}

      </div>

    </section>
  )}

<script>
  // Script per l'effetto scambio parole
  // Ora alterniamo tra i due ambiti disciplinari
  const words = ["Scientist", "Engineer"]; 
  let i = 0;
  const element = document.getElementById("dynamic-word");

  if (element) {
    setInterval(() => {
      // 1. Fade Out
      element.style.opacity = "0";

      setTimeout(() => {
        // 2. Cambia la parola
        i = (i + 1) % words.length;
        element.textContent = words[i];

        // 3. Fade In
        element.style.opacity = "1";
      }, 500); 

    }, 3000); 
  }
</script>

</BaseLayout>